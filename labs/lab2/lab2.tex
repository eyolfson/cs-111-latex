\input{../preamble}

\labnumber{2}
\title{You Spin Me Round Robin}
\version{3.0.0}
\author{Jon Eyolfson}
\date{October 20, 2021}
\duedate{November 3, 2021 @ 11:59 PM PT}

\begin{document}

\maketitle

In this lab you'll be writing the implementation for round robin scheduling
for a given workload and quantum length.
You'll be given a basic skeleton that parses an input file and command line
arguments.
You're expected to understand how you would implement round robin if you were
to implement it yourself in a kernel (which means doing it in C).
The lab section in week 5 will give a quick introduction into how to use the
C style linked lists (if you're unfamiliar) and the structure of the skeleton
code.

\paragraph{Additional APIs.}

You may need a doubly linked list for your implement.
For this lab you should use \texttt{TAILQ} from \texttt{sys/queue.h}.
Use \texttt{man 3 tailq} to see all of the macros you can use.
There's already a list created for you called \texttt{process\_list} with a
\texttt{TAILQ} entry name of \texttt{pointers}.
You should not have to include any more headers or use any additional APIs,
besides adding your code.

\paragraph{Starting the lab.}

Run the following command to get the skeleton for Lab 2:
\texttt{git pull upstream main}.
You should be able to run \texttt{make} in the \texttt{lab-02} directory to
create a \texttt{rr} executable, and then \texttt{make clean} to remove all
binary files.
There is also an example \texttt{processes.txt} file in your lab directory.
The \texttt{rr} executable takes a file path as the first argument, and a
quantum length as the second.
For example, you can run: \texttt{./rr processes.txt 3}.

\paragraph{Files to modify.}

You should only be modifying \texttt{rr.c} and \texttt{README.md} in the
\texttt{lab-02} directory.

\paragraph{Your task.}

You should only add additional fields to \texttt{struct process} and add your
code to \texttt{main} between the comments in the skeleton. You may add
functions to call from main if you wish, but calls should only be between the
comments. We assume a single time unit is the smallest atomic unit (we cannot
split it even smaller).
You should ensure your scheduler calculates the total waiting time and total
response time to the variables \texttt{total\_waiting\_time} and
\texttt{total\_response\_time}.
The program then outputs the average waiting time and response time for you.
Finally, fill in your \texttt{README.md} so that you could use your program
without having to use this document.

\paragraph{Errors.}

All the allocations and input are handled for you, so there should be no need to
handle any errors.
You may assume integer overflows will not happen with a valid schedule.

\paragraph{Tips.}

You should ensure your implementation works with the examples in Lecture 7.

\paragraph{Example output.}

The \texttt{process.txt} file is the example from Lecture 7. You should be able
run:

\begin{lstlisting}
> ./rr processes.txt 3
Average waiting time: 7.00             
Average response time: 2.75
\end{lstlisting}

\paragraph{Testing.}

There are a set of basic test cases given to you (they'll be released a few
days after the lab).
We'll withhold more advanced tests which we'll use for grading.
Part of programming is coming up with tests yourself.
To run the provided test cases please run the following command in your lab
directory:

\begin{lstlisting}[xleftmargin=2em]
python -m unittest
\end{lstlisting}

\paragraph{Submission.}

Simply push your code using \lstinline|git push origin main| (or simply
\lstinline|git push|) to submit it.
\textit{You need to create your own commits to push, you can use as many
as you'd like.}
You'll need to use the \texttt{git add} and \texttt{git commit} commands.
You may push as many commits as you want, your latest commit that modifies
the lab files counts as your submission.
For late days we will look at the timestamp on our server.
We will never use your commit times (or file access times) as proof of
submission, only when you push your code to the course Git server.

We've created a new system for the fall quarter that double checks you
have the latest upstream code and have submitted something.
Please check
\url{https://laforge.cs.ucla.edu/cs111/grades/}
to see your status.
You're expected to properly merge in upstream code without rebasing.
Note that the website only updates your lab modification status
if you've merged the latest code.

\end{document}
